<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contramuseo • Archivo Digital</title>
    
    <!-- METADATOS -->
    <meta name="description" content="Archivo digital de colecciones históricas y culturales organizadas por categorías temáticas.">
    <meta name="author" content="Contramuseo">

    <!-- ESTILOS GENERALES -->
    <link rel="stylesheet" href="css/estilos.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- SWIPER (para carruseles dentro del mosaico) -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css">

    <!-- ICONOS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PRELOAD PARA MEJOR PERFORMANCE -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://unpkg.com/swiper@8/swiper-bundle.min.css">
</head>

<body>
    <!-- SIDEBAR -->
    <div id="sidebar" role="complementary" aria-label="Menú lateral"></div>
    
    <!-- TOGGLE BUTTON (se creará dinámicamente) -->
    
    <!-- CONTENIDO PRINCIPAL -->
    <main class="contenido" role="main">

        <!-- ENCABEZADO DEL INDEX -->
        <section class="epoca">
            <h1>Contramuseo</h1>

            <p class="autor">Archivo digital de colecciones temáticas</p>

            <p class="intro">
                Archivo dedicado a la documentación y análisis de objetos históricos y culturales, 
                organizados en colecciones temáticas accesibles desde el mosaico inferior.
            </p>
            
            <!-- INDICADOR DE CARGA PARA MOSAICO -->
            <div id="mosaic-loading" class="mosaic-loading" style="display: none;">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>Cargando colecciones...</span>
                </div>
            </div>
        </section>

        <!-- MOSAICO PRINCIPAL -->
        <section class="mosaic-container">
            <div class="mosaic-grid" id="mosaicPackery">
                <!-- El contenido se generará dinámicamente con mosaic.js -->
            </div>
            
            <!-- FALLBACK SI JAVASCRIPT NO FUNCIONA -->
            <noscript>
                <div class="noscript-message" style="padding: 2rem; text-align: center; background: #f8f9fa; border-radius: 8px; margin: 2rem 0;">
                    <h3 style="color: #dc3545;">JavaScript requerido</h3>
                    <p>Para ver las colecciones del Contramuseo, necesitas habilitar JavaScript en tu navegador.</p>
                    <p>Las colecciones incluyen: Colecciones Oseas, Falsos y réplicas, Cultura en disputa, Archivos vivos, y más.</p>
                </div>
            </noscript>
        </section>
        
        <!-- INFORMACIÓN ADICIONAL -->
        <section class="info-adicional" style="margin-top: 3rem;">
            <h3>Acerca del archivo</h3>
            <p>Este archivo digital presenta 18 objetos organizados en 9 categorías temáticas que exploran diferentes aspectos del patrimonio cultural mexicano. Cada objeto incluye análisis, imágenes y contenido audiovisual.</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                <div class="gradient-card">
                    <h4 style="margin-bottom: 0.5rem; color: #4a6fa5;">9 categorías</h4>
                    <p style="font-size: 0.9rem; color: #555;">Organización temática especializada</p>
                </div>
                <div class="gradient-card">
                    <h4 style="margin-bottom: 0.5rem; color: #4a6fa5;">18 objetos</h4>
                    <p style="font-size: 0.9rem; color: #555;">Documentación completa de cada pieza</p>
                </div>
                <div class="gradient-card">
                    <h4 style="margin-bottom: 0.5rem; color: #4a6fa5;">Contenido multimedia</h4>
                    <p style="font-size: 0.9rem; color: #555;">Imágenes, audio y descripciones detalladas</p>
                </div>
            </div>
        </section>

    </main>

    <!-- LIBRERÍAS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>

    <!-- CARGA DEL SIDEBAR -->
    <script src="js/sidebarLoader.js"></script>

    <!-- MOSAICO DINÁMICO -->
    <script src="js/mosaic.js"></script>

    <!-- SCRIPTS GENERALES DEL SITIO -->
    <script src="js/main.js"></script>
    
    <!-- INLINE SCRIPT PARA MEJORAR EXPERIENCIA -->
    <script>
        // Mostrar indicador de carga mientras se carga el mosaico
        document.addEventListener('DOMContentLoaded', function() {
            const mosaicContainer = document.querySelector('.mosaic-container');
            const loadingIndicator = document.getElementById('mosaic-loading');
            
            if (loadingIndicator && mosaicContainer) {
                // Mostrar loading
                loadingIndicator.style.display = 'block';
                
                // Ocultar después de 3 segundos (o cuando se cargue el mosaico)
                setTimeout(function() {
                    loadingIndicator.style.display = 'none';
                }, 3000);
            }
            
            // Verificar que Swiper se cargó correctamente
            window.addEventListener('load', function() {
                if (typeof Swiper === 'undefined') {
                    console.error('Swiper no se cargó correctamente. Verifica la conexión a internet.');
                    // Mostrar mensaje al usuario
                    const mosaicGrid = document.querySelector('.mosaic-grid');
                    if (mosaicGrid) {
                        const errorMsg = document.createElement('div');
                        errorMsg.className = 'error-message';
                        errorMsg.innerHTML = `
                            <div style="padding: 2rem; text-align: center; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; margin: 1rem 0;">
                                <h4 style="color: #856404;">⚠️ Advertencia</h4>
                                <p>Algunas funciones pueden no estar disponibles temporalmente.</p>
                            </div>
                        `;
                        mosaicGrid.parentNode.insertBefore(errorMsg, mosaicGrid.nextSibling);
                    }
                }
            });
        });
    </script>
    
    <!-- ESTILOS INLINE PARA LOADING -->
    <style>
        .mosaic-loading {
            text-align: center;
            padding: 3rem 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            margin: 2rem 0;
            border: 1px solid #e9ecef;
        }
        
        .loading-spinner {
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .loading-spinner i {
            font-size: 1.5rem;
            color: #4a6fa5;
        }
        
        .loading-spinner span {
            color: #5a2a27;
            font-weight: 500;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .mosaic-item {
            animation: fadeIn 0.5s ease forwards;
            opacity: 0;
        }
    </style>

</body>
</html>